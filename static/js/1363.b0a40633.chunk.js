"use strict";(self.webpackChunkYield_Forge_Protocol=self.webpackChunkYield_Forge_Protocol||[]).push([[1363],{71605:function(e,t,n){n.d(t,{W:function(){return h}});var r=n(15671),i=n(43144),a=n(97326),s=n(60136),c=n(29388),o=n(46170),u=n(73274),h=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;(0,r.Z)(this,n);var s=e.chains,c=void 0===s?u.gL9:s,h=e.options;return i=t.call(this),(0,o._)((0,a.Z)(i),"id",void 0),(0,o._)((0,a.Z)(i),"name",void 0),(0,o._)((0,a.Z)(i),"chains",void 0),(0,o._)((0,a.Z)(i),"options",void 0),(0,o._)((0,a.Z)(i),"ready",void 0),i.chains=c,i.options=h,i}return(0,i.Z)(n,[{key:"getBlockExplorerUrls",value:function(e){var t,n,r=null!==(t=null===(n=e.explorers)||void 0===n?void 0:n.map((function(e){return e.url})))&&void 0!==t?t:[];return r.length>0?r:void 0}},{key:"isChainUnsupported",value:function(e){return!this.chains.some((function(t){return t.chainId===e}))}},{key:"updateChains",value:function(e){this.chains=e}}]),n}(n(65892).Z)},6170:function(e,t,n){n.d(t,{A:function(){return p},C:function(){return l},R:function(){return f},S:function(){return Z},U:function(){return m},a:function(){return v}});var r=n(43144),i=n(15671),a=n(97326),s=n(60136),c=n(29388),o=n(98737),u=n(46170),h=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e,r){var s;(0,i.Z)(this,n);var c=r.cause,o=r.code,h=r.data;if(!Number.isInteger(o))throw new Error('"code" must be an integer.');if(!e||"string"!==typeof e)throw new Error('"message" must be a nonempty string.');return s=t.call(this,e),(0,u._)((0,a.Z)(s),"cause",void 0),(0,u._)((0,a.Z)(s),"code",void 0),(0,u._)((0,a.Z)(s),"data",void 0),s.cause=c,s.code=o,s.data=h,s}return(0,r.Z)(n)}((0,o.Z)(Error)),d=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e,r){(0,i.Z)(this,n);var a=r.cause,s=r.code,c=r.data;if(!(Number.isInteger(s)&&s>=1e3&&s<=4999))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');return t.call(this,e,{cause:a,code:s,data:c})}return(0,r.Z)(n)}(h),p=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,i.Z)(this,n),e=t.apply(this,arguments),(0,u._)((0,a.Z)(e),"name","AddChainError"),(0,u._)((0,a.Z)(e),"message","Error adding chain"),e}return(0,r.Z)(n)}((0,o.Z)(Error)),l=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;(0,i.Z)(this,n);var s=e.chainId,c=e.connectorId;return r=t.call(this,'Chain "'.concat(s,'" not configured for connector "').concat(c,'".')),(0,u._)((0,a.Z)(r),"name","ChainNotConfigured"),r}return(0,r.Z)(n)}((0,o.Z)(Error)),v=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,i.Z)(this,n),e=t.apply(this,arguments),(0,u._)((0,a.Z)(e),"name","ConnectorNotFoundError"),(0,u._)((0,a.Z)(e),"message","Connector not found"),e}return(0,r.Z)(n)}((0,o.Z)(Error)),f=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,"Resource unavailable",{cause:e,code:-32002}),(0,u._)((0,a.Z)(r),"name","ResourceUnavailable"),r}return(0,r.Z)(n)}(h),Z=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,"Error switching chain",{cause:e,code:4902}),(0,u._)((0,a.Z)(r),"name","SwitchChainError"),r}return(0,r.Z)(n)}(d),m=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,"User rejected request",{cause:e,code:4001}),(0,u._)((0,a.Z)(r),"name","UserRejectedRequestError"),r}return(0,r.Z)(n)}(d)},61779:function(e,t,n){function r(e){return"string"===typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):"bigint"===typeof e?Number(e):e}n.d(t,{n:function(){return r}})},1363:function(e,t,n){n.r(t),n.d(t,{WalletConnectV1Connector:function(){return S}});var r=n(29439),i=n(4942),a=n(1413),s=n(74165),c=n(15861),o=n(15671),u=n(43144),h=n(97326),d=n(60136),p=n(29388),l=n(41146),v=n(63700),f=n(46170),Z=n(58755),m=n(97419),g=n(60723),w=n(49716),b=n(71605),y=n(61779),C=n(6170),_=(n(65892),"last-used-chain-id"),k="last-session",x=new WeakMap,I=new WeakMap,E=new WeakSet,U=new WeakSet,S=function(e){(0,d.Z)(b,e);var t=(0,p.Z)(b);function b(e){var n;return(0,o.Z)(this,b),n=t.call(this,e),(0,l._)((0,h.Z)(n),U),(0,l._)((0,h.Z)(n),E),(0,f._)((0,h.Z)(n),"id",Z.w.walletConnectV1),(0,f._)((0,h.Z)(n),"name","WalletConnectV1"),(0,f._)((0,h.Z)(n),"ready",!0),(0,v._)((0,h.Z)(n),x,{writable:!0,value:void 0}),(0,v._)((0,h.Z)(n),I,{writable:!0,value:void 0}),(0,f._)((0,h.Z)(n),"walletName",void 0),(0,f._)((0,h.Z)(n),"onSwitchChain",(function(){n.emit("message",{type:"switch_chain"})})),(0,f._)((0,h.Z)(n),"onDisplayUri",function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&n.emit("message",{data:t,type:"display_uri_error"}),n.emit("message",{data:r.params[0],type:"display_uri"});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,f._)((0,h.Z)(n),"onRequestSent",(function(e,t){e&&n.emit("message",{data:e,type:"request"}),n.emit("message",{data:t.params[0],type:"request"})})),(0,f._)((0,h.Z)(n),"onMessage",(function(e){n.emit("message",e)})),(0,f._)((0,h.Z)(n),"onAccountsChanged",(function(e){0===e.length?n.emit("disconnect"):n.emit("change",{account:m.getAddress(e[0])})})),(0,f._)((0,h.Z)(n),"onChainChanged",(function(e){var t=(0,y.n)(e),r=n.isChainUnsupported(t);(0,v.b)((0,h.Z)(n),I).setItem(_,String(e)),n.emit("change",{chain:{id:t,unsupported:r}})})),(0,f._)((0,h.Z)(n),"onDisconnect",(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.walletName=void 0,(0,v.b)((0,h.Z)(n),I).removeItem(_),(0,v.b)((0,h.Z)(n),I).removeItem(k),(0,l.a)((0,h.Z)(n),U,q).call((0,h.Z)(n)),n.emit("disconnect");case 5:case"end":return e.stop()}}),e)})))),(0,v.a)((0,h.Z)(n),I,e.storage),n}return(0,u.Z)(b,[{key:"connect",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,r,i,a,c,o,u,h,d,p,f,Z=this,w=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(w.length>0&&void 0!==w[0]?w[0]:{}).chainId,e.prev=1,a=t){e.next=9;break}return e.next=6,(0,v.b)(this,I).getItem(_);case 6:c=e.sent,(o=c?parseInt(c):void 0)&&!this.isChainUnsupported(o)&&(a=o);case 9:return e.next=11,this.getProvider({chainId:a,create:!0});case 11:return u=e.sent,this.setupListeners(),setTimeout((function(){return Z.emit("message",{type:"connecting"})}),0),e.next=16,u.enable();case 16:return h=e.sent,d=m.getAddress(h[0]),e.next=20,this.getChainId();case 20:if(p=e.sent,f=this.isChainUnsupported(p),this.walletName=null!==(n=null===(r=u.connector)||void 0===r||null===(i=r.peerMeta)||void 0===i?void 0:i.name)&&void 0!==n?n:"",!t){e.next=34;break}return e.prev=24,e.next=27,this.switchChain(t);case 27:p=t,f=this.isChainUnsupported(p),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(24),console.error("could not switch to desired chain id: ".concat(t," "),e.t0);case 34:return(0,l.a)(this,E,N).call(this),this.emit("connect",{account:d,chain:{id:p,unsupported:f},provider:u}),e.abrupt("return",{account:d,chain:{id:p,unsupported:f},provider:new g.Q(u)});case 39:if(e.prev=39,e.t1=e.catch(1),!/user closed modal/i.test(e.t1.message)){e.next=43;break}throw new C.U(e.t1);case 43:throw e.t1;case 44:case"end":return e.stop()}}),e,this,[[1,39],[24,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:return t=e.sent,e.next=5,t.disconnect();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccount",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:return t=e.sent,n=t.accounts,e.abrupt("return",m.getAddress(n[0]));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainId",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:return t=e.sent,n=(0,y.n)(t.chainId),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProvider",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,r,c,o,u,h,d,p,l,f,Z=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(t=Z.length>0&&void 0!==Z[0]?Z[0]:{}).chainId,c=t.create,(0,v.b)(this,x)&&!r&&!c){e.next=12;break}return d=null!==(o=this.options)&&void 0!==o&&o.infuraId?{}:this.chains.reduce((function(e,t){return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},t.chainId,t.rpc[0]))}),{}),e.next=5,Promise.all([n.e(741),n.e(1739),n.e(9313)]).then(n.bind(n,9313));case 5:return p=e.sent.default,e.next=8,(0,v.b)(this,I).getItem(k);case 8:l=e.sent,f=l?JSON.parse(l):void 0,this.walletName=(null===f||void 0===f||null===(u=f.peerMeta)||void 0===u?void 0:u.name)||void 0,(0,v.a)(this,x,new p((0,a.Z)((0,a.Z)({},this.options),{},{chainId:r,rpc:(0,a.Z)((0,a.Z)({},d),null===(h=this.options)||void 0===h?void 0:h.rpc),session:f||void 0})));case 12:return e.abrupt("return",(0,v.b)(this,x));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSigner",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,i,a,c,o=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(o.length>0&&void 0!==o[0]?o[0]:{}).chainId,e.next=3,Promise.all([this.getProvider({chainId:t}),this.getAccount()]);case 3:return n=e.sent,i=(0,r.Z)(n,2),a=i[0],c=i[1],e.abrupt("return",new g.Q(a,t).getSigner(c));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isAuthorized",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAccount();case 3:return t=e.sent,e.abrupt("return",!!t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i,a,c,o,u=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:return n=e.sent,r=w.hexValue(t),e.prev=4,e.next=7,Promise.race([n.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]}),new Promise((function(e){return u.on("change",(function(n){var r=n.chain;(null===r||void 0===r?void 0:r.id)===t&&e(t)}))}))]);case 7:return e.abrupt("return",null!==(i=this.chains.find((function(e){return e.chainId===t})))&&void 0!==i?i:{chainId:t,name:"Chain ".concat(r),network:"".concat(r),nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpc:[""],shortName:"eth",chain:"ETH",slug:"ethereum",testnet:!1});case 10:if(e.prev=10,e.t0=e.catch(4),a="string"===typeof e.t0?e.t0:null===e.t0||void 0===e.t0?void 0:e.t0.message,!/user rejected request/i.test(a)){e.next=15;break}throw new C.U(e.t0);case 15:if(c=this.chains.find((function(e){return e.chainId===t}))){e.next=18;break}throw new C.S("Chain ".concat(t," is not added in the list of supported chains"));case 18:if(!/Unrecognized chain ID/i.test(a)){e.next=26;break}return this.emit("message",{type:"add_chain"}),o=this.getBlockExplorerUrls(c),e.next=23,n.request({method:"wallet_addEthereumChain",params:[{chainId:r,chainName:c.name,nativeCurrency:c.nativeCurrency,rpcUrls:c.rpc,blockExplorerUrls:o}]});case 23:return e.abrupt("return",c);case 26:throw new C.S(e.t0);case 27:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setupListeners",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,v.b)(this,x)){e.next=2;break}return e.abrupt("return");case 2:(0,v.b)(this,x).on("accountsChanged",this.onAccountsChanged),(0,v.b)(this,x).on("chainChanged",this.onChainChanged),(0,v.b)(this,x).on("disconnect",this.onDisconnect),(0,v.b)(this,x).on("message",this.onMessage),(0,v.b)(this,x).on("switchChain",this.onSwitchChain),(0,v.b)(this,x).on("display_uri",this.onDisplayUri),(0,v.b)(this,x).on("call_request_sent",this.onRequestSent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),b}(b.W);function N(){return P.apply(this,arguments)}function P(){return(P=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null===(t=(0,v.b)(this,x))||void 0===t?void 0:t.connector.session,this.walletName=(null===r||void 0===r||null===(n=r.peerMeta)||void 0===n?void 0:n.name)||"",i=JSON.stringify(r),(0,v.b)(this,I).setItem(k,i);case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function q(){(0,v.b)(this,x)&&((0,v.b)(this,x).removeListener("accountsChanged",this.onAccountsChanged),(0,v.b)(this,x).removeListener("chainChanged",this.onChainChanged),(0,v.b)(this,x).removeListener("disconnect",this.onDisconnect),(0,v.b)(this,x).removeListener("message",this.onMessage),(0,v.b)(this,x).removeListener("switchChain",this.onSwitchChain),(0,v.b)(this,x).removeListener("display_uri",this.onDisplayUri),(0,v.b)(this,x).removeListener("call_request_sent",this.onRequestSent))}}}]);
//# sourceMappingURL=1363.b0a40633.chunk.js.map