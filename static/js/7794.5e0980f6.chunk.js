"use strict";(self.webpackChunkYield_Forge_Protocol=self.webpackChunkYield_Forge_Protocol||[]).push([[7794],{71605:function(e,t,n){n.d(t,{W:function(){return h}});var r=n(15671),i=n(43144),a=n(97326),s=n(60136),c=n(29388),o=n(46170),u=n(73274),h=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;(0,r.Z)(this,n);var s=e.chains,c=void 0===s?u.gL9:s,h=e.options;return i=t.call(this),(0,o._)((0,a.Z)(i),"id",void 0),(0,o._)((0,a.Z)(i),"name",void 0),(0,o._)((0,a.Z)(i),"chains",void 0),(0,o._)((0,a.Z)(i),"options",void 0),(0,o._)((0,a.Z)(i),"ready",void 0),i.chains=c,i.options=h,i}return(0,i.Z)(n,[{key:"getBlockExplorerUrls",value:function(e){var t,n,r=null!==(t=null===(n=e.explorers)||void 0===n?void 0:n.map((function(e){return e.url})))&&void 0!==t?t:[];return r.length>0?r:void 0}},{key:"isChainUnsupported",value:function(e){return!this.chains.some((function(t){return t.chainId===e}))}},{key:"updateChains",value:function(e){this.chains=e}}]),n}(n(65892).Z)},6170:function(e,t,n){n.d(t,{A:function(){return l},C:function(){return v},R:function(){return f},S:function(){return Z},U:function(){return m},a:function(){return p}});var r=n(43144),i=n(15671),a=n(97326),s=n(60136),c=n(29388),o=n(98737),u=n(46170),h=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e,r){var s;(0,i.Z)(this,n);var c=r.cause,o=r.code,h=r.data;if(!Number.isInteger(o))throw new Error('"code" must be an integer.');if(!e||"string"!==typeof e)throw new Error('"message" must be a nonempty string.');return s=t.call(this,e),(0,u._)((0,a.Z)(s),"cause",void 0),(0,u._)((0,a.Z)(s),"code",void 0),(0,u._)((0,a.Z)(s),"data",void 0),s.cause=c,s.code=o,s.data=h,s}return(0,r.Z)(n)}((0,o.Z)(Error)),d=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e,r){(0,i.Z)(this,n);var a=r.cause,s=r.code,c=r.data;if(!(Number.isInteger(s)&&s>=1e3&&s<=4999))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');return t.call(this,e,{cause:a,code:s,data:c})}return(0,r.Z)(n)}(h),l=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,i.Z)(this,n),e=t.apply(this,arguments),(0,u._)((0,a.Z)(e),"name","AddChainError"),(0,u._)((0,a.Z)(e),"message","Error adding chain"),e}return(0,r.Z)(n)}((0,o.Z)(Error)),v=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;(0,i.Z)(this,n);var s=e.chainId,c=e.connectorId;return r=t.call(this,'Chain "'.concat(s,'" not configured for connector "').concat(c,'".')),(0,u._)((0,a.Z)(r),"name","ChainNotConfigured"),r}return(0,r.Z)(n)}((0,o.Z)(Error)),p=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,i.Z)(this,n),e=t.apply(this,arguments),(0,u._)((0,a.Z)(e),"name","ConnectorNotFoundError"),(0,u._)((0,a.Z)(e),"message","Connector not found"),e}return(0,r.Z)(n)}((0,o.Z)(Error)),f=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,"Resource unavailable",{cause:e,code:-32002}),(0,u._)((0,a.Z)(r),"name","ResourceUnavailable"),r}return(0,r.Z)(n)}(h),Z=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,"Error switching chain",{cause:e,code:4902}),(0,u._)((0,a.Z)(r),"name","SwitchChainError"),r}return(0,r.Z)(n)}(d),m=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,"User rejected request",{cause:e,code:4001}),(0,u._)((0,a.Z)(r),"name","UserRejectedRequestError"),r}return(0,r.Z)(n)}(d)},61779:function(e,t,n){function r(e){return"string"===typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):"bigint"===typeof e?Number(e):e}n.d(t,{n:function(){return r}})},47794:function(e,t,n){n.r(t),n.d(t,{MetaMaskConnector:function(){return U}});var r=n(74165),i=n(15861),a=n(1413),s=n(15671),c=n(43144),o=n(97326),u=n(60136),h=n(29388),d=n(63700),l=n(46170),v=n(6170),p=n(40643),f=n(58755),Z=n(29439),m=n(93433),w=n(37762),g=n(97419),k=n(60723),x=n(49716),b=n(71605),C=n(61779);n(65892);var y=new WeakMap,_=new WeakMap,I=function(e){(0,u.Z)(n,e);var t=(0,h.Z)(n);function n(e){var c;(0,s.Z)(this,n);var u={shimDisconnect:!0,shimChainChangedDisconnect:!0,getProvider:function(){if((0,p.a)(globalThis.window))return globalThis.window.ethereum}},h=(0,a.Z)((0,a.Z)({},u),e.options);c=t.call(this,{chains:e.chains,options:h}),(0,l._)((0,o.Z)(c),"id",void 0),(0,l._)((0,o.Z)(c),"name",void 0),(0,l._)((0,o.Z)(c),"ready",void 0),(0,d._)((0,o.Z)(c),y,{writable:!0,value:void 0}),(0,d._)((0,o.Z)(c),_,{writable:!0,value:void 0}),(0,l._)((0,o.Z)(c),"connectorStorage",void 0),(0,l._)((0,o.Z)(c),"shimDisconnectKey","injected.shimDisconnect"),(0,l._)((0,o.Z)(c),"onAccountsChanged",function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=5;break}return e.next=3,c.onDisconnect();case 3:e.next=6;break;case 5:c.emit("change",{account:g.getAddress(t[0])});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,l._)((0,o.Z)(c),"onChainChanged",(function(e){var t=(0,C.n)(e),n=c.isChainUnsupported(t);c.emit("change",{chain:{id:t,unsupported:n}})})),(0,l._)((0,o.Z)(c),"onDisconnect",(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.options.shimChainChangedDisconnect||!(0,d.b)((0,o.Z)(c),_)){e.next=3;break}return(0,d.a)((0,o.Z)(c),_,!1),e.abrupt("return");case 3:if(c.emit("disconnect"),!c.options.shimDisconnect){e.next=7;break}return e.next=7,c.connectorStorage.removeItem(c.shimDisconnectKey);case 7:case"end":return e.stop()}}),e)}))));var v=h.getProvider();if("string"===typeof h.name)c.name=h.name;else if(v){var f=function(e){var t,n;if(!e)return"Injected";var r=function(e){return e.isAvalanche?"Core Wallet":e.isBitKeep?"BitKeep":e.isBraveWallet?"Brave Wallet":e.isCoinbaseWallet?"Coinbase Wallet":e.isExodus?"Exodus":e.isFrame?"Frame":e.isKuCoinWallet?"KuCoin Wallet":e.isMathWallet?"MathWallet":e.isOneInchIOSWallet||e.isOneInchAndroidWallet?"1inch Wallet":e.isOpera?"Opera":e.isPortal?"Ripio Portal":e.isTally?"Tally":e.isTokenPocket?"TokenPocket":e.isTokenary?"Tokenary":e.isTrust||e.isTrustWallet?"Trust Wallet":e.isMetaMask?"MetaMask":void 0};if(null!==(t=e.providers)&&void 0!==t&&t.length){var i,a,s=new Set,c=1,o=(0,w.Z)(e.providers);try{for(o.s();!(a=o.n()).done;){var u=r(a.value);u||(u="Unknown Wallet #".concat(c),c+=1),s.add(u)}}catch(d){o.e(d)}finally{o.f()}var h=(0,m.Z)(s);return h.length?h:null!==(i=h[0])&&void 0!==i?i:"Injected"}return null!==(n=r(e))&&void 0!==n?n:"Injected"}(v);h.name?c.name=h.name(f):c.name="string"===typeof f?f:f[0]}else c.name="Injected";return c.id="injected",c.ready=!!v,c.connectorStorage=e.connectorStorage,c}return(0,c.Z)(n,[{key:"connect",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,a,s,c,o,u=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.prev=1,e.next=4,this.getProvider();case 4:if(n=e.sent){e.next=7;break}throw new v.a;case 7:return this.setupListeners(),this.emit("message",{type:"connecting"}),e.next=11,n.request({method:"eth_requestAccounts"});case 11:return i=e.sent,a=g.getAddress(i[0]),e.next=15,this.getChainId();case 15:if(s=e.sent,c=this.isChainUnsupported(s),!t.chainId||s===t.chainId){e.next=28;break}return e.prev=18,e.next=21,this.switchChain(t.chainId);case 21:s=t.chainId,c=this.isChainUnsupported(t.chainId),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(18),console.error("Could not switch to chain id: ".concat(t.chainId),e.t0);case 28:if(!this.options.shimDisconnect){e.next=31;break}return e.next=31,this.connectorStorage.setItem(this.shimDisconnectKey,"true");case 31:return o={account:a,chain:{id:s,unsupported:c},provider:n},this.emit("connect",o),e.abrupt("return",o);case 36:if(e.prev=36,e.t1=e.catch(1),!this.isUserRejectedRequestError(e.t1)){e.next=40;break}throw new v.U(e.t1);case 40:if(-32002!==e.t1.code){e.next=42;break}throw new v.R(e.t1);case 42:throw e.t1;case 43:case"end":return e.stop()}}),e,this,[[1,36],[18,25]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:if(null!==(t=e.sent)&&void 0!==t&&t.removeListener){e.next=5;break}return e.abrupt("return");case 5:if(t.removeListener("accountsChanged",this.onAccountsChanged),t.removeListener("chainChanged",this.onChainChanged),t.removeListener("disconnect",this.onDisconnect),!this.options.shimDisconnect){e.next=11;break}return e.next=11,this.connectorStorage.removeItem(this.shimDisconnectKey);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccount",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:if(t=e.sent){e.next=5;break}throw new v.a;case 5:return e.next=7,t.request({method:"eth_accounts"});case 7:return n=e.sent,e.abrupt("return",g.getAddress(n[0]));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainId",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:if(t=e.sent){e.next=5;break}throw new v.a;case 5:return e.abrupt("return",t.request({method:"eth_chainId"}).then(C.n));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProvider",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.options.getProvider())&&(0,d.a)(this,y,t),e.abrupt("return",(0,d.b)(this,y));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSigner",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,a,s,c=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(c.length>0&&void 0!==c[0]?c[0]:{}).chainId,e.next=3,Promise.all([this.getProvider(),this.getAccount()]);case 3:return n=e.sent,i=(0,Z.Z)(n,2),a=i[0],s=i[1],e.abrupt("return",new k.Q(a,t).getSigner(s));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isAuthorized",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=this.options.shimDisconnect,!e.t0){e.next=8;break}return e.t1=Boolean,e.next=6,this.connectorStorage.getItem(this.shimDisconnectKey);case 6:e.t2=e.sent,e.t0=!(0,e.t1)(e.t2);case 8:if(!e.t0){e.next=10;break}return e.abrupt("return",!1);case 10:return e.next=12,this.getProvider();case 12:if(e.sent){e.next=15;break}throw new v.a;case 15:return e.next=17,this.getAccount();case 17:return t=e.sent,e.abrupt("return",!!t);case 21:return e.prev=21,e.t3=e.catch(0),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,a,s,c,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.options.shimChainChangedDisconnect&&(0,d.a)(this,_,!0),e.next=3,this.getProvider();case 3:if(n=e.sent){e.next=6;break}throw new v.a;case 6:return i=x.hexValue(t),e.prev=7,e.next=10,n.request({method:"wallet_switchEthereumChain",params:[{chainId:i}]});case 10:if(!(a=this.chains.find((function(e){return e.chainId===t})))){e.next=13;break}return e.abrupt("return",a);case 13:return e.abrupt("return",{chainId:t,name:"Chain ".concat(i),slug:"".concat(i),nativeCurrency:{name:"Ether",decimals:18,symbol:"ETH"},rpc:[""],chain:"",shortName:"",testnet:!0});case 16:if(e.prev=16,e.t0=e.catch(7),o=this.chains.find((function(e){return e.chainId===t}))){e.next=21;break}throw new v.C({chainId:t,connectorId:this.id});case 21:if(4902!==e.t0.code&&4902!==(null===e.t0||void 0===e.t0||null===(s=e.t0.data)||void 0===s||null===(c=s.originalError)||void 0===c?void 0:c.code)){e.next=33;break}return e.prev=22,e.next=25,n.request({method:"wallet_addEthereumChain",params:[{chainId:i,chainName:o.name,nativeCurrency:o.nativeCurrency,rpcUrls:o.rpc,blockExplorerUrls:this.getBlockExplorerUrls(o)}]});case 25:return e.abrupt("return",o);case 28:if(e.prev=28,e.t1=e.catch(22),!this.isUserRejectedRequestError(e.t1)){e.next=32;break}throw new v.U(e.t0);case 32:throw new v.A;case 33:if(!this.isUserRejectedRequestError(e.t0)){e.next=35;break}throw new v.U(e.t0);case 35:throw new v.S(e.t0);case 36:case"end":return e.stop()}}),e,this,[[7,16],[22,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setupListeners",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:(t=e.sent).on&&(t.on("accountsChanged",this.onAccountsChanged),t.on("chainChanged",this.onChainChanged),t.on("disconnect",this.onDisconnect));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isUserRejectedRequestError",value:function(e){return 4001===e.code}}]),n}(b.W),E=new WeakMap,U=function(e){(0,u.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;(0,s.Z)(this,n);var i={name:"MetaMask",shimDisconnect:!0,shimChainChangedDisconnect:!0,getProvider:function(){function e(e){if(!(null===e||void 0===e||!e.isMetaMask)&&(!e.isBraveWallet||e._events||e._state)&&!e.isAvalanche&&!e.isKuCoinWallet&&!e.isPortal&&!e.isTokenPocket&&!e.isTokenary)return e}var t;if((0,p.a)(globalThis.window))return null!==(t=globalThis.window.ethereum)&&void 0!==t&&t.providers?globalThis.window.ethereum.providers.find(e):e(globalThis.window.ethereum)}},c=(0,a.Z)((0,a.Z)({},i),e.options);return r=t.call(this,{chains:e.chains,options:c,connectorStorage:e.connectorStorage}),(0,l._)((0,o.Z)(r),"id",f.w.metamask),(0,d._)((0,o.Z)(r),E,{writable:!0,value:void 0}),(0,d.a)((0,o.Z)(r),E,c.UNSTABLE_shimOnConnectSelectAccount),r}return(0,c.Z)(n,[{key:"connect",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,a,s,c,o,u,h,l=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.prev=1,e.next=4,this.getProvider();case 4:if(a=e.sent){e.next=7;break}throw new v.a;case 7:if(this.setupListeners(),this.emit("message",{type:"connecting"}),s=null,!(0,d.b)(this,E)||null===(n=this.options)||void 0===n||!n.shimDisconnect||Boolean(this.connectorStorage.getItem(this.shimDisconnectKey))){e.next=25;break}return e.next=13,this.getAccount().catch((function(){return null}));case 13:if(s=e.sent,!!!s){e.next=25;break}return e.prev=16,e.next=19,a.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});case 19:e.next=25;break;case 21:if(e.prev=21,e.t0=e.catch(16),!this.isUserRejectedRequestError(e.t0)){e.next=25;break}throw new v.U(e.t0);case 25:if(s){e.next=30;break}return e.next=28,a.request({method:"eth_requestAccounts"});case 28:c=e.sent,s=g.getAddress(c[0]);case 30:return e.next=32,this.getChainId();case 32:if(o=e.sent,u=this.isChainUnsupported(o),!t.chainId||o===t.chainId){e.next=45;break}return e.prev=35,e.next=38,this.switchChain(t.chainId);case 38:o=t.chainId,u=this.isChainUnsupported(t.chainId),e.next=45;break;case 42:e.prev=42,e.t1=e.catch(35),console.error("Could not switch to chain id : ".concat(t.chainId),e.t1);case 45:if(null===(i=this.options)||void 0===i||!i.shimDisconnect){e.next=48;break}return e.next=48,this.connectorStorage.setItem(this.shimDisconnectKey,"true");case 48:return h={chain:{id:o,unsupported:u},provider:a,account:s},this.emit("connect",h),e.abrupt("return",h);case 53:if(e.prev=53,e.t2=e.catch(1),!this.isUserRejectedRequestError(e.t2)){e.next=57;break}throw new v.U(e.t2);case 57:if(-32002!==e.t2.code){e.next=59;break}throw new v.R(e.t2);case 59:throw e.t2;case 60:case"end":return e.stop()}}),e,this,[[1,53],[16,21],[35,42]])})));return function(){return e.apply(this,arguments)}}()},{key:"switchAccount",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:return t=e.sent,e.next=5,t.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(I)}}]);
//# sourceMappingURL=7794.5e0980f6.chunk.js.map